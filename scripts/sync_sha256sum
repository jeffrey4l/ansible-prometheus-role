#!/bin/bash

#URL=https://github.com/prometheus/prometheus/releases/download/v2.5.0-rc.2/sha256sums.txt
BASE_URL=https://github.com/prometheus/prometheus/releases/download/

ME=$0
CUR_DIR=$(dirname $(readlink -f $ME))
PROJECT_ROOT=$(dirname ${CUR_DIR})

tags=$(curl https://api.github.com/repos/prometheus/prometheus/git/refs/tags | awk '/"ref"/')

VERSIONS=(
    all-tests-pass
    checkout
    v1.0.0
    v1.0.0-rc.0
    v1.0.1
    v1.0.2
    v1.1.0
    v1.1.1
    v1.1.2
    v1.1.3
    v1.2.0
    v1.2.1
    v1.2.2
    v1.2.3
    v1.3.0
    v1.3.0-beta.0
    v1.3.1
    v1.4.0
    v1.4.1
    v1.5.0
    v1.5.1
    v1.5.2
    v1.5.3
    v1.6.0
    v1.6.1
    v1.6.2
    v1.6.3
    v1.7.0
    v1.7.1
    v1.7.2
    v1.8.0
    v1.8.1
    v1.8.2
    v2.0.0
    v2.0.0-alpha.0
    v2.0.0-alpha.1
    v2.0.0-alpha.2
    v2.0.0-alpha.3
    v2.0.0-beta.0
    v2.0.0-beta.1
    v2.0.0-beta.2
    v2.0.0-beta.3
    v2.0.0-beta.4
    v2.0.0-beta.5
    v2.0.0-rc.0
    v2.0.0-rc.1
    v2.0.0-rc.2
    v2.0.0-rc.3
    v2.1.0
    v2.2.0
    v2.2.0-rc.0
    v2.2.0-rc.1
    v2.2.1
    v2.3.0
    v2.3.1
    v2.3.2
    v2.4.0
    v2.4.0-rc.0
    v2.4.1
    v2.4.2
    v2.4.3
    v2.5.0
    v2.5.0-rc.0
    v2.5.0-rc.1
    v2.5.0-rc.2
    0.1.0
    0.10.0
    0.11.0
    0.11.1
    0.12.0
    0.13.0
    0.13.0rc2
    0.13.1
    0.13.2
    0.13.3
    0.13.4
    0.14.0
    0.14.0rc1
    0.14.0rc2
    0.14.0rc3
    0.15.0
    0.15.0rc1
    0.15.0rc2
    0.15.0rc3
    0.15.1
    0.16.0
    0.16.0rc1
    0.16.0rc2
    0.16.1
    0.16.2
    0.17.0
    0.17.0rc1
    0.17.0rc2
    0.18.0
    0.18.0rc1
    0.19.0
    0.19.1
    0.19.2
    0.19.3
    0.2.0
    0.20.0
    0.2.1
    0.3.0
    0.4.0
    0.5.0
    0.6.0
    0.7.0
    0.8.0
    0.9.0
    0.9.0rc1
    0.9.0rc2
    0.9.0rc3
    0.9.0rc4
    0.9.0rc5
    )

for version in ${VERSIONS[@]}; do
    dest=${PROJECT_ROOT}/vars/$version.sha256sums.yml
    echo --- > $dest
    curl -L $BASE_URL/${version}/sha256sums.txt | sed -r 's/(\S+)\s+(\S+)/\2: sha256:\1/' >> $dest
done
